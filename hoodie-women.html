<!DOCTYPE html>
<html lang="fa">
  <head>
    <meta charset="UTF-8" />
    <title>هودی سه‌بعدی با متن دلخواه</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        font-family: sans-serif;
        direction: rtl;
      }
      #overlay {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 10;
        background: rgba(255, 255, 255, 0.9);
        padding: 10px;
        border-radius: 10px;
      }
      input, button {
        margin-top: 5px;
        padding: 5px 10px;
        font-size: 1rem;
      }
      model-viewer {
        width: 100%;
        height: 100vh;
        background-color: #eee;
      }
      #textLayer {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none; /* اجازه نمی‌دهد که با این لایه تعامل کنید */
      }
    </style>
  </head>
  <body>
    <div id="overlay">
      <label>متن دلخواه:</label>
      <input type="text" id="textInput" placeholder="مثلاً توسکا" />
      <button id="applyText">اعمال متن</button>
    </div>

    <!-- استفاده از model-viewer -->
    <model-viewer
      id="hoodieModel"
      src="hoodie.glb"
      alt="هودی سه‌بعدی"
      auto-rotate
      camera-controls
      ar
      exposure="1"
      shadow-intensity="1"
      interaction-prompt="none">
    </model-viewer>

    <!-- لایه متن که به عنوان یک رویه اضافه میشه -->
    <div id="textLayer"></div>

    <script>
      const modelViewer = document.getElementById('hoodieModel');
      const textInput = document.getElementById('textInput');
      const applyTextBtn = document.getElementById('applyText');
      const textLayer = document.getElementById('textLayer');

      // ذخیره مکان متن روی مدل
      let textPosition = { x: 0, y: 0 };  // مکان پیش‌فرض

      // اعمال متن بر روی مدل
      applyTextBtn.addEventListener('click', () => {
        const text = textInput.value;
        if (!text) return;

        // ایجاد عنصر متن
        const textElement = document.createElement('div');
        textElement.textContent = text;
        textElement.style.position = 'absolute';
        textElement.style.color = 'white';
        textElement.style.fontSize = '30px';
        textElement.style.fontWeight = 'bold';
        textElement.style.pointerEvents = 'none';
        textElement.style.left = `${textPosition.x}%`;  // مکان متن (به درصد)
        textElement.style.top = `${textPosition.y}%`;

        textLayer.appendChild(textElement);
      });

      // برای انتخاب مکان روی مدل، کاربر کلیک می‌کنه
      modelViewer.addEventListener('click', (event) => {
        // محاسبه مکان کلیک روی مدل (در درصد)
        const rect = modelViewer.getBoundingClientRect();
        const x = ((event.clientX - rect.left) / rect.width) * 100;
        const y = ((event.clientY - rect.top) / rect.height) * 100;

        textPosition = { x, y };  // ذخیره مکان
        console.log(`مکان جدید: (${x}%, ${y}%)`);
      });
    </script>
  </body>
</html>
