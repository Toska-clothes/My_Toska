<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <title>هودی زنانه</title>
  <style>
    body {
      background-color: #f5f7dd;
      font-family: sans-serif;
      text-align: center;
    }
    canvas {
      display: block;
      margin: 0 auto;
      border-radius: 20px;
    }
  </style>
</head>
<body>
  <h2>هودی زنانه</h2>
  <p>مدل را مشاهده، رنگ را انتخاب و متن را روی مدل اعمال کنید:</p>
  <div>
    <input type="color" id="colorPicker" />
    <input type="text" id="textInput" placeholder="مثلاً توسکا" />
    <button onclick="applyText()">اعمال متن</button>
  </div>
  <div id="viewer" style="height: 500px;"></div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/loaders/GLTFLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>
  <script>
    let scene = new THREE.Scene();
    let camera = new THREE.PerspectiveCamera(75, window.innerWidth / 500, 0.1, 1000);
    let renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth * 0.8, 500);
    document.getElementById("viewer").appendChild(renderer.domElement);

    let controls = new THREE.OrbitControls(camera, renderer.domElement);
    camera.position.z = 2;

    let light = new THREE.HemisphereLight(0xffffff, 0x444444, 1.5);
    scene.add(light);

    let loader = new THREE.GLTFLoader();
    let model;

    loader.load(
      'https://cdn.jsdelivr.net/gh/Toska-clothes/My_Toska@main/file-HiVKnTH6D1kEgZQDQqyyak.glb',
      function (gltf) {
        model = gltf.scene;
        model.scale.set(1, 1, 1);
        scene.add(model);
      },
      undefined,
      function (error) {
        console.error('Error loading GLB model:', error);
      }
    );

    function applyText() {
      const text = document.getElementById('textInput').value;
      const color = document.getElementById('colorPicker').value;

      if (model) {
        model.traverse((child) => {
          if (child.isMesh) {
            child.material.color.set(color);
          }
        });
        console.log("Text for later use:", text); // اگر خواستی روی مدل حک شه باید از تکسچر استفاده کنی
      }
    }

    function animate() {
      requestAnimationFrame(animate);
      renderer.render(scene, camera);
    }

    animate();
  </script>
</body>
</html>
