
<!DOCTYPE html>
<html lang="fa">
  <head>
    <meta charset="UTF-8" />
    <title>هودی سه‌بعدی با متن دلخواه</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        font-family: sans-serif;
        direction: rtl;
      }
      #overlay {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 10;
        background: rgba(255, 255, 255, 0.9);
        padding: 10px;
        border-radius: 10px;
      }
      input, button {
        margin-top: 5px;
        padding: 5px 10px;
        font-size: 1rem;
      }
      model-viewer {
        width: 100%;
        height: 100vh;
        background-color: #eee;
      }
    </style>
  </head>
  <body>
    <div id="overlay">
      <label>متن دلخواه:</label>
      <input type="text" id="textInput" placeholder="مثلاً توسکا" />
      <button id="applyText">اعمال متن</button>
    </div>

    <!-- استفاده از model-viewer -->
    <model-viewer
      id="hoodieModel"
      src="hoodie.glb"
      alt="هودی سه‌بعدی"
      auto-rotate
      camera-controls
      ar
      exposure="1"
      shadow-intensity="1"
      interaction-prompt="none">
    </model-viewer>

    <script>
      const modelViewer = document.getElementById('hoodieModel');
      const textInput = document.getElementById('textInput');
      const applyTextBtn = document.getElementById('applyText');

      applyTextBtn.addEventListener('click', () => {
        const text = textInput.value;
        if (!text) return;

        // ساخت تکسچر با متن
        const canvas = document.createElement('canvas');
        canvas.width = 512;
        canvas.height = 512;
        const ctx = canvas.getContext('2d');

        // زمینه سفید
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // نوشتن متن وسط بوم
        ctx.fillStyle = '#000000';
        ctx.font = 'bold 40px Vazirmatn';
        ctx.textAlign = 'center';
        ctx.fillText(text, canvas.width / 2, canvas.height / 2);

        const texture = new THREE.CanvasTexture(canvas);

        // اضافه کردن تکسچر به مدل
        modelViewer.addEventListener('load', () => {
          const material = modelViewer.model?.materials[0];
          if (material) {
            material.pbrMetallicRoughness.baseColorTexture = texture;
          }
        });
      });
    </script>
  </body>
</html>
